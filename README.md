
# Задание

Написать обработчик на Python для решения следующей задачи:

Имеется несколько строк вида:

```a|b b|cc|d d d|e|f|g| key1=value1 key2=value2 key3=value3 … keyN=valueN```

Особенности формата строки:
- строка содержит фиксированное количество разделителей | – 7 шт. Между этими разделителями содержатся различные значения. При этом некоторые или все значения могут быть пустыми, в таком случае разделители будут идти друг за другом ||
- также среди значений, заключенных между разделителями |, могут встречаться экранированные пайпы  «\|» - это означает, что значение содержит в себе символ |
- после последнего разделителя | - в строке содержится неопределенное количество пар ключ=значение
- порядок и количество пар ключ=значение может варьироваться;
- пары «ключ=значение» разделены пробелом;
- знак равенства между ключом и значением не разделяется пробелами;
- ключ (key) может содержать любые символы, кроме пробела, знака =, а также знака |
- значение (value) может содержать любые символы.

Необходимо организовать код независимо, как библиотеку, чтобы его можно было легко встраивать в другие модули.

На вход необходимо получить имя файла из аргументов командой строки (например, файл test.log, приложен к заданию).

На выходе выдать список словарей, где каждый словарь в качестве пары ключ-значение содержит соответствующие пары ключ-значение из строки. Для первых 7-ми значений можно задать свои наименования ключей. При реализации функции можно пользоваться Regex выражениями.
Результат выполнения желательно вывести в файл в формате json.

Внимательно подойти к комментированию кода, стилю и именованию переменных и функций, чтобы код было легко читать и воспринимать.
К ответному письму приложить файлы скрипта и json-файл с результатом выполнения.


# Работа с библиотекой

## Установка

```bash
pip install git+https://github.com/GGM03/log_parsing_test_task.git
```


## Работа с библиотекой
### Использование в виде приложения командной строки

```bash
$ log_parser 
usage: log_parser <log file>
$ python -m log_parser
usage: log_parser <log file>

```


### Использование в виде подключаемой библиотеки
```python
from log_parser import parse_log_line, parse_log_lines

print('Single line:')
print(parse_log_line(r'a \r s \||b \n \| b|c \| c|d d d|e asd asd|f|| key1=value1 key2=value2 key3=value3 ... keyN=valueN'))

print('Multi line:')
print(parse_log_lines('''
a|b b|cc|d d d|e|f|g| key1=value1 key2=value2 key3=value3 … keyN=valueN
value1 | value2| value3| value4|e|f|g| key1=value1 key2=value2 key3=value3 somekey1=somevalue 1 2 3 somekey2=test1
'''))

```

Вывод:
```
Single line:
{'param1': 'a \\r s \\|', 'param2': 'b \\n \\| b', 'param3': 'c \\| c', 'param4': 'd d d', 'param5': 'e asd asd', 'param6': 'f', 'param7': '', 'key1': 'value1', 'key2': 'value2', 'key3': 'value3 ...', 'keyN': 'valueN'}
Multi line:
[{'param1': 'a', 'param2': 'b b', 'param3': 'cc', 'param4': 'd d d', 'param5': 'e', 'param6': 'f', 'param7': 'g', 'key1': 'value1', 'key2': 'value2', 'key3': 'value3 …', 'keyN': 'valueN'}, {'param1': 'value1 ', 'param2': ' value2', 'param3': ' value3', 'param4': ' value4', 'param5': 'e', 'param6': 'f', 'param7': 'g', 'key1': 'value1', 'key2': 'value2', 'key3': 'value3', 'somekey1': 'somevalue 1 2 3', 'somekey2': 'test1'}]

```
